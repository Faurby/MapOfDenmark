<?xml version="1.0" encoding="UTF-8"?>

<?import bfst21.view.MapCanvas?>
<?import javafx.scene.Scene?>

<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.control.ToolBar?>

<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<Scene xmlns="http://javafx.com/javafx"
       xmlns:fx="http://javafx.com/fxml"
       fx:controller="bfst21.view.Controller"
       fx:id="scene">
    <root>
        <StackPane fx:id="stackPane" minHeight="480" minWidth="640">
            <MapCanvas fx:id="canvas"
                       height="${stackPane.height}"
                       width="${stackPane.width}"
                       onMouseDragged="#onMouseDragged"
                       onMousePressed="#onMousePressed"
                       onMouseReleased="#onMouseReleased"
                       onScroll="#onScroll"
            >
            </MapCanvas>
            <VBox fx:id="debugBox" maxWidth="40" maxHeight="20" style="-fx-padding: 30">
                <Text text="zoomPercent" fx:id="zoomPercent"/>
                <Text text="zoomText" fx:id="zoomText"/>
                <Text text="repaintTime" fx:id="repaintTime"/>
                <Text text="nodeSkipAmount" fx:id="nodeSkipAmount"/>
                <VBox fx:id="debugOptions"
                      minWidth="150"
                      style="-fx-background-color: #f6f6f6; -fx-border-color: #3E859B;">
                    <padding>
                        <Insets top="5" right="10" bottom="5" left="10"/>
                    </padding>
                    <Text text="Debug options:" style="-fx-padding: 2"/>
                    <CheckBox text="Load relations" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Use KD tree" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Use R tree" selected="false" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display KD tree" selected="false" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display graph" selected="false" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display relations" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display island" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display water" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display waterway" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display landuse" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display cycleway" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display footway" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display pedestrian" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display road" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display residential" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display trunk" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display motorway" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display tertiary" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display primary" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display building" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Display unknown" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                    <CheckBox text="Save OBJ file" selected="true" onAction="#onCheckDebug" style="-fx-padding: 2"/>
                </VBox>
            </VBox>
            <AnchorPane maxHeight="10" maxWidth="10" minHeight="10" minWidth="10" StackPane.alignment="TOP_LEFT">
                <padding><Insets bottom="8" left="8" top="8" /></padding>

                <VBox fx:id="searchAddressVBox" minWidth="175" style="-fx-background-color: #f6f6f6; -fx-border-color: #3E859B"
                      AnchorPane.leftAnchor="0.0"
                      AnchorPane.topAnchor="0.0">
                    <padding><Insets bottom="5" left="10" right="10" top="10" /></padding>
                    <TextArea fx:id="addressArea" minHeight="20" prefHeight="25" promptText="Type an address..." wrapText="true" onKeyPressed="#tabEnterCheck" />
                    <HBox alignment="BASELINE_CENTER" prefWidth="198.0" style="-fx-padding: 10 0 5 0">
                        <Button fx:id="navigateButton" onAction="#expandSearchView" text="Navigate" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <ToolBar visible="false" HBox.hgrow="ALWAYS" />
                        <Button fx:id="searchButton" onAction="#searchNavigationAddresses" text="Search" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                    </HBox>
                </VBox>

                <VBox fx:id="navigationVBox" minWidth="200" style="-fx-background-color: #f6f6f6; -fx-border-color: #3E859B"
                      AnchorPane.leftAnchor="0.0"
                      AnchorPane.topAnchor="0.0"
                      visible="false" >
                    <padding><Insets bottom="5" left="10" right="10" top="10" /></padding>

                    <Text fx:id="navigationHeader" style="-fx-font-size: 15" text="Navigation"/>
                    <TextArea fx:id="startingPoint" minHeight="20" prefHeight="25" promptText="From:" wrapText="true" onKeyPressed="#tabEnterCheck" />

                    <GridPane prefHeight="30" >
                        <Button fx:id="switchButton" maxHeight="20" maxWidth="40" onAction="#switchText"
                                GridPane.columnIndex="2" GridPane.rowIndex="0" GridPane.rowSpan="3">
                            <graphic>
                                <ImageView fitHeight="20.0" fitWidth="40.0" preserveRatio="true" style="-fx-background-color: TRANSPARENT">
                                    <Image url="/arrowPic.png" />
                                </ImageView>
                            </graphic>
                        </Button>
                    </GridPane>

                    <TextArea fx:id="destinationPoint" minHeight="25" prefHeight="25" promptText="To:" wrapText="true" onKeyPressed="#tabEnterCheck"/>

                    <HBox style="-fx-padding: 10 0 0 0 ; -fx-alignment: CENTER " >
                        <ToggleButton fx:id="CAR" minHeight="40" minWidth="35" prefWidth="120" onAction="#transportationButtonPushed" selected="true" style="-fx-border-color: LIGHTGREY">
                            <graphic>
                                <ImageView fitHeight="32.0" preserveRatio="true" style="-fx-background-color: TRANSPARENT">
                                    <Image url="/carPic.png" />
                                </ImageView>
                            </graphic>
                            <toggleGroup>
                                <ToggleGroup fx:id="group"/>
                            </toggleGroup>
                        </ToggleButton>
                        <ToggleButton fx:id="BIKE" minHeight="40" minWidth="35" prefWidth="120" onAction="#transportationButtonPushed" style="-fx-border-color: LIGHTGREY">
                            <graphic>
                                <ImageView fitHeight="32.0" preserveRatio="true" style="-fx-background-color: TRANSPARENT">
                                    <Image url="/bikePic.png" />
                                </ImageView>
                            </graphic>
                            <toggleGroup>
                                <fx:reference source="group"/>
                            </toggleGroup>
                        </ToggleButton>
                        <ToggleButton fx:id="WALK" minHeight="40" minWidth="35" prefWidth="120" onAction="#transportationButtonPushed" style="-fx-border-color: LIGHTGREY">
                            <graphic>
                                <ImageView fitHeight="32.0" preserveRatio="true" style="-fx-background-color: TRANSPARENT">
                                    <Image url="/walkPic.png" />
                                </ImageView>
                            </graphic>
                            <toggleGroup>
                                <fx:reference source="group"/>
                            </toggleGroup>
                        </ToggleButton>
                    </HBox>

                    <HBox alignment="BASELINE_CENTER" style="-fx-padding: 10 0 5 0">
                        <Button fx:id="minimizeButton" onAction="#expandSearchView" text="Minimize" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <ToolBar visible="false" HBox.hgrow="ALWAYS" />
                        <Button fx:id="searchButtonExpanded" onAction="#searchNavigationAddresses" text="Search" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                    </HBox>
                </VBox>

                <StackPane.margin>
                    <Insets top="30.0" />
                </StackPane.margin>
            </AnchorPane>
            <VBox fx:id="loadingText" minHeight="100" minWidth="100" visible="false"
                  style="-fx-background-color: WHITE; -fx-padding: 20;" alignment="CENTER">
                <Text text="Loading" style="-fx-font-size: 24;"></Text>
                <ProgressBar fx:id="progressBar" style="-fx-padding: 20;" minWidth="200"></ProgressBar>
            </VBox>
            <HBox fx:id="menuBarHBox" maxHeight="25" minHeight="25" minWidth="${scene.width}" StackPane.alignment="TOP_LEFT">
                <MenuBar minWidth="${menuBarHBox.width}">
                    <Menu text="File">
                        <MenuItem text="Load default" onAction="#loadDefault"/>
                        <MenuItem text="Load new file" onAction="#loadNewFile"/>
                        <MenuItem text="Save" />
                    </Menu>
                    <Menu text="View">
                        <MenuItem onAction="#zoomButtonClicked" text="Zoom in" />
                        <MenuItem onAction="#zoomButtonClicked" text="Zoom out" />
                    </Menu>
                    <Menu text="Accessibility">
                        <Menu text="Color modes">
                            <MenuItem onAction="#changeColorMode" text="Standard" />
                            <MenuItem onAction="#changeColorMode" text="Black and White" />
                            <MenuItem onAction="#changeColorMode" text="Colorblind" />
                        </Menu>
                        <MenuItem onAction="#userNodeButtonClicked" text="Add point of interest"></MenuItem>
                    </Menu>
                </MenuBar>
            </HBox>
            <VBox fx:id="userNodeVBox"
                  visible="false"
                  maxWidth="150"
                  prefWidth="150"
                  maxHeight="100"
                  prefHeight="100"
                  alignment="CENTER"
                  style="-fx-background-color: #f6f6f6; -fx-border-color: #a0a0a0;"
                  spacing="8">
                <Text text="New Point of Interest"/>
                <TextField fx:id="userNodeTextField"
                           onKeyPressed="#userNodeTextFieldKeyPressed"
                           promptText="Description"
                           maxWidth="140"
                           prefWidth="140"
                />
                <HBox maxWidth="140" alignment="BASELINE_CENTER">
                    <Button text="Cancel"
                            onAction="#userNodeCancelClicked"
                            maxWidth="90"
                            prefWidth="90"
                    />
                    <ToolBar visible="false" HBox.hgrow="ALWAYS" />
                    <Button text="Save"
                            onAction="#userNodeSaveClicked"
                            maxWidth="90"
                            prefWidth="90"
                    />
                </HBox>
            </VBox>
            <VBox fx:id="userNodeClickedVBox"
                  visible="false"
                  maxWidth="200"
                  prefWidth="200"
                  maxHeight="100"
                  prefHeight="100"
                  alignment="CENTER"
                  style="-fx-background-color: #f6f6f6; -fx-border-color: #a0a0a0;"
                  spacing="8">
                <Text text="Failed to load description" fx:id="userNodeClickedText"/>
                <Button text="Change description"
                        onAction="#userNodeChangeDescriptionClicked"
                        maxWidth="130"
                />
                <HBox maxWidth="130" alignment="BASELINE_CENTER">
                    <Button text="Close"
                            onAction="#userNodeCloseClicked"
                            maxWidth="90"
                            prefWidth="90"
                    />
                    <ToolBar visible="false" HBox.hgrow="ALWAYS" />
                    <Button text="Delete"
                            onAction="#userNodeDeleteClicked"
                            maxWidth="90"
                            prefWidth="90"
                    />
                </HBox>
            </VBox>
            <VBox fx:id="userNodeNewDescriptionVBox"
                  visible="false"
                  maxWidth="150"
                  prefWidth="150"
                  maxHeight="90"
                  prefHeight="90"
                  alignment="CENTER"
                  style="-fx-background-color: #f6f6f6; -fx-border-color: #a0a0a0;"
                  spacing="7">
                <Text text="Enter new description"/>
                <TextField fx:id="userNodeNewDescriptionTextField"
                           onKeyPressed="#userNodeNewDescTextFieldKeyPressed"
                           promptText="New description"
                           maxWidth="140"
                           prefWidth="140"
                />
                <HBox maxWidth="140" alignment="BASELINE_CENTER">
                    <Button text="Cancel"
                            onAction="#userNodeNewDescCancelClicked"
                            maxWidth="90"
                            prefWidth="90"
                    />
                    <ToolBar visible="false" HBox.hgrow="ALWAYS" />
                    <Button text="Save"
                            onAction="#userNodeNewDescSaveClicked"
                            maxWidth="90"
                            prefWidth="90"
                    />
                </HBox>
            </VBox>
        </StackPane>
    </root>
</Scene>
